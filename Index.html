<!DOCTYPE html>
<html lang="lo">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sedthasard App v7.0</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Lao:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Phetsarath+OT:wght@400;500;600;700&display=swap');
        
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Phetsarath OT', 'Noto Sans Lao', sans-serif;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }
        
        @keyframes slideText {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }
        
        .slide-animation {
            animation: slideText 10s linear infinite;
            font-size: 1.25rem;
            font-weight: 700;
            white-space: nowrap;
        }
        
        .background-overlay {
            background: linear-gradient(135deg, #1a4d3a 0%, #0f2419 100%);
            border: 3px solid #dc2626;
            min-height: 100vh;
        }
        
        .custom-bg {
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }
        
        .glass-effect {
            background: rgba(26, 77, 58, 0.4);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        .btn-primary { 
            background: linear-gradient(135deg, #16a34a, #15803d);
            transition: all 0.3s ease;
        }
        .btn-primary:hover { 
            background: linear-gradient(135deg, #15803d, #166534);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(22, 163, 74, 0.4);
        }
        
        .btn-secondary { 
            background: linear-gradient(135deg, #dc2626, #b91c1c);
            transition: all 0.3s ease;
        }
        .btn-secondary:hover { 
            background: linear-gradient(135deg, #b91c1c, #991b1b);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(220, 38, 38, 0.4);
        }
        
        .btn-accent { 
            background: linear-gradient(135deg, #7c3aed, #6d28d9);
            transition: all 0.3s ease;
        }
        .btn-accent:hover { 
            background: linear-gradient(135deg, #6d28d9, #5b21b6);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(124, 58, 237, 0.4);
        }
        
        .btn-pink { 
            background: linear-gradient(135deg, #ec4899, #db2777);
            transition: all 0.3s ease;
        }
        .btn-pink:hover { 
            background: linear-gradient(135deg, #db2777, #be185d);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(236, 72, 153, 0.4);
        }
        
        .btn-orange { 
            background: linear-gradient(135deg, #ea580c, #dc2626);
            transition: all 0.3s ease;
        }
        .btn-orange:hover { 
            background: linear-gradient(135deg, #dc2626, #b91c1c);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(234, 88, 12, 0.4);
        }
        
        .text-primary { color: #16a34a; }
        .text-secondary { color: #dc2626; }
        
        .flag-icon {
            width: 24px;
            height: 16px;
            display: inline-block;
            margin-right: 8px;
        }
        
        .search-result {
            background: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        
        .search-result:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-2px);
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Responsive improvements */
        @media (max-width: 768px) {
            .slide-animation {
                font-size: 1rem;
            }
            
            .glass-effect {
                margin: 0.5rem;
                padding: 1rem;
            }
        }
        
        /* Better scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
        }
        
        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.5);
        }
    </style>
</head>
<body class="min-h-screen background-overlay custom-bg">
    <!-- Login Page -->
    <div id="loginPage" class="min-h-screen flex flex-col justify-between p-6 fade-in">
        <!-- Top Controls -->
        <div class="absolute top-4 right-4 flex gap-2">
            <!-- Language Selector -->
            <div class="relative">
                <button onclick="toggleLanguageMenu()" class="glass-effect text-white px-4 py-2 rounded-lg hover:bg-white/30 transition-all flex items-center">
                    <span id="currentFlag" class="flag-icon">üá±üá¶</span>
                    <span id="currentLang" data-key="language">‡∫û‡∫≤‡∫™‡∫≤</span>
                </button>
                <div id="languageMenu" class="hidden absolute top-12 right-0 glass-effect rounded-lg p-2 min-w-40 z-50">
                    <button onclick="changeLanguage('lo')" class="w-full text-left text-white px-3 py-2 hover:bg-white/20 rounded flex items-center">
                        üá±üá¶ <span data-key="lao">‡∫•‡∫≤‡∫ß</span>
                    </button>
                    <button onclick="changeLanguage('en')" class="w-full text-left text-white px-3 py-2 hover:bg-white/20 rounded flex items-center">
                        üá∫üá∏ <span data-key="english">English</span>
                    </button>
                    <button onclick="changeLanguage('vi')" class="w-full text-left text-white px-3 py-2 hover:bg-white/20 rounded flex items-center">
                        üáªüá≥ <span data-key="vietnamese">Ti·∫øng Vi·ªát</span>
                    </button>
                    <button onclick="changeLanguage('zh')" class="w-full text-left text-white px-3 py-2 hover:bg-white/20 rounded flex items-center">
                        üá®üá≥ <span data-key="chinese">‰∏≠Êñá</span>
                    </button>
                    <button onclick="changeLanguage('th')" class="w-full text-left text-white px-3 py-2 hover:bg-white/20 rounded flex items-center">
                        üáπüá≠ <span data-key="thai">‡πÑ‡∏ó‡∏¢</span>
                    </button>
                </div>
            </div>
            <!-- Background Image Selector -->
            <input type="file" id="bgImageInput" accept="image/*" class="hidden">
            <button onclick="document.getElementById('bgImageInput').click()" class="glass-effect text-white px-4 py-2 rounded-lg hover:bg-white/30 transition-all">
                üì∑ <span data-key="changeBackground">‡∫õ‡ªà‡∫Ω‡∫ô‡∫û‡∫∑‡ªâ‡∫ô‡∫´‡∫•‡∫±‡∫á</span>
            </button>
        </div>

        <!-- Logo Section -->
        <div class="text-center mt-16">
            <div class="relative inline-block">
                <div class="glass-effect rounded-full w-24 h-24 mx-auto flex items-center justify-center mb-4 pulse">
                    <span id="appLogo" class="text-4xl">üéì</span>
                </div>
            </div>
            <h1 class="text-white text-2xl font-bold" data-key="appName">Sedthasard App v7.0</h1>
            <p class="text-white/70 text-sm mt-2">Student Finance Management System</p>
        </div>

        <!-- Login Form -->
        <div class="flex-1 flex items-center justify-center">
            <div class="glass-effect rounded-2xl p-8 w-full max-w-md">
                <h2 class="text-white text-xl font-semibold mb-6 text-center" data-key="login">‡ªÄ‡∫Ç‡∫ª‡ªâ‡∫≤‡∫™‡∫π‡ªà‡∫•‡∫∞‡∫ö‡∫ª‡∫ö</h2>
                <div class="relative mb-4">
                    <input type="password" id="loginPassword" data-key-placeholder="enterPassword" placeholder="‡ªÉ‡∫™‡ªà‡∫•‡∫∞‡∫´‡∫±‡∫î‡∫ú‡ªà‡∫≤‡∫ô" 
                           class="w-full px-4 py-3 rounded-lg bg-white/10 border border-red-500/50 text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-green-500 transition-all"
                           onkeypress="handleEnterKey(event)">
                    <button type="button" onclick="togglePassword()" class="absolute right-3 top-3 text-white/70 hover:text-white transition-colors">
                        <span id="eyeIcon">üëÅÔ∏è</span>
                    </button>
                </div>
                <div id="errorMessage" class="text-red-300 text-sm mb-4 hidden" data-key="incorrectPassword">
                    ‡∫•‡∫∞‡∫´‡∫±‡∫î‡∫ú‡ªà‡∫≤‡∫ô‡∫ö‡ªç‡ªà‡∫ñ‡∫∑‡∫Å‡∫ï‡ªâ‡∫≠‡∫á. ‡∫ö‡ªç‡ªà‡∫™‡∫≤‡∫°‡∫≤‡∫î‡ªÄ‡∫Ç‡∫ª‡ªâ‡∫≤‡∫™‡∫π‡ªà‡ªÅ‡∫≠‡∫±‡∫ö‡ªÑ‡∫î‡ªâ.
                </div>
                <button onclick="login()" class="w-full btn-primary text-white py-3 rounded-lg font-semibold transition-all" data-key="loginButton">
                    <span id="loginText">‡ªÄ‡∫Ç‡∫ª‡ªâ‡∫≤‡∫™‡∫π‡ªà‡∫•‡∫∞‡∫ö‡∫ª‡∫ö</span>
                    <span id="loginLoading" class="loading hidden"></span>
                </button>
            </div>
        </div>

        <!-- Footer Message -->
        <div class="text-center">
            <p class="text-white/80 text-sm" data-key="footerMessage">
                ‡ªÅ‡∫≠‡∫±‡∫ö‡∫ô‡∫µ‡ªâ‡ªÅ‡∫°‡ªà‡∫ô‡∫™‡ªç‡∫≤‡∫•‡∫±‡∫ö‡∫Å‡∫≤‡∫ô‡∫ö‡∫±‡∫ô‡∫ó‡∫∂‡∫Å‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô‡ªÅ‡∫•‡∫∞‡∫•‡∫≤‡∫ç‡∫Æ‡∫±‡∫ö-‡∫•‡∫≤‡∫ç‡∫à‡ªà‡∫≤‡∫ç‡∫Ç‡∫≠‡∫á‡∫ô‡∫±‡∫Å‡∫™‡∫∂‡∫Å‡∫™‡∫≤‡ªÄ‡∫™‡∫î‡∫ñ‡∫∞‡∫Å‡∫¥‡∫î‡ªÅ‡∫•‡∫∞‡∫Å‡∫≤‡∫ô‡∫Ñ‡∫∏‡ªâ‡∫°‡∫Ñ‡∫≠‡∫á‡ªÄ‡∫™‡∫î‡∫ñ‡∫∞‡∫Å‡∫¥‡∫î‡ªÄ‡∫ó‡∫ª‡ªà‡∫≤‡∫ô‡∫±‡ªâ‡∫ô
            </p>
        </div>
    </div>

    <!-- Main Dashboard -->
    <div id="mainDashboard" class="hidden min-h-screen p-6 fade-in">
        <!-- Header -->
        <div class="glass-effect rounded-2xl p-6 mb-6 border border-red-500/30">
            <div class="flex items-center justify-between mb-4">
                <div class="flex items-center">
                    <span id="dashboardLogo" class="text-4xl mr-3">üéì</span>
                    <div>
                        <h1 class="text-white text-3xl font-bold" data-key="appName">Sedthasard App v7.0</h1>
                        <p class="text-white/70 text-sm">Advanced Finance Management</p>
                    </div>
                </div>
                <div class="flex gap-2">
                    <!-- Logo Management -->
                    <div class="relative">
                        <input type="file" id="logoInput" accept="image/*" class="hidden">
                        <button onclick="document.getElementById('logoInput').click()" class="glass-effect text-white px-3 py-2 rounded-lg hover:bg-white/30 transition-all text-sm">
                            üñºÔ∏è <span data-key="changeLogo">‡∫õ‡ªà‡∫Ω‡∫ô‡ªÇ‡∫•‡ªÇ‡∫Å‡ªâ</span>
                        </button>
                    </div>
                    <div class="relative">
                        <button onclick="toggleLanguageMenu()" class="glass-effect text-white px-3 py-2 rounded-lg hover:bg-white/30 transition-all flex items-center text-sm">
                            <span id="dashboardFlag" class="flag-icon">üá±üá¶</span>
                            <span id="dashboardLang" data-key="language">‡∫û‡∫≤‡∫™‡∫≤</span>
                        </button>
                        <div id="dashboardLanguageMenu" class="hidden absolute top-12 right-0 glass-effect rounded-lg p-2 min-w-40 z-50">
                            <button onclick="changeLanguage('lo')" class="w-full text-left text-white px-3 py-2 hover:bg-white/20 rounded flex items-center">
                                üá±üá¶ <span data-key="lao">‡∫•‡∫≤‡∫ß</span>
                            </button>
                            <button onclick="changeLanguage('en')" class="w-full text-left text-white px-3 py-2 hover:bg-white/20 rounded flex items-center">
                                üá∫üá∏ <span data-key="english">English</span>
                            </button>
                            <button onclick="changeLanguage('vi')" class="w-full text-left text-white px-3 py-2 hover:bg-white/20 rounded flex items-center">
                                üáªüá≥ <span data-key="vietnamese">Ti·∫øng Vi·ªát</span>
                            </button>
                            <button onclick="changeLanguage('zh')" class="w-full text-left text-white px-3 py-2 hover:bg-white/20 rounded flex items-center">
                                üá®üá≥ <span data-key="chinese">‰∏≠Êñá</span>
                            </button>
                            <button onclick="changeLanguage('th')" class="w-full text-left text-white px-3 py-2 hover:bg-white/20 rounded flex items-center">
                                üáπüá≠ <span data-key="thai">‡πÑ‡∏ó‡∏¢</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="overflow-hidden glass-effect rounded-lg p-3 border border-green-500/30">
                <div class="slide-animation text-white font-semibold" data-key="welcomeMessage">
                    ‡∫ç‡∫¥‡∫ô‡∫î‡∫µ‡∫ï‡ªâ‡∫≠‡∫ô‡∫Æ‡∫±‡∫ö‡∫™‡∫π‡ªà‡ªÅ‡∫≠‡∫±‡∫ö‡ªÄ‡∫™‡∫î‡∫ñ‡∫∞‡∫Å‡∫¥‡∫î‡ªÅ‡∫•‡∫∞‡∫Å‡∫≤‡∫ô‡∫Ñ‡∫∏‡ªâ‡∫°‡∫Ñ‡∫≠‡∫á‡ªÄ‡∫™‡∫î‡∫ñ‡∫∞‡∫Å‡∫¥‡∫î - Version 7.0 ‡∫û‡ªâ‡∫≠‡∫°‡∫ü‡∫µ‡ªÄ‡∫à‡∫µ‡ªÉ‡ªù‡ªà‡∫ó‡∫µ‡ªà‡∫ó‡∫±‡∫ô‡∫™‡∫∞‡ªÑ‡ªù
                </div>
            </div>
        </div>

        <!-- Search Section -->
        <div class="glass-effect rounded-2xl p-6 mb-6 border border-blue-500/30">
            <h3 class="text-white text-lg font-semibold mb-4">üîç <span data-key="searchData">‡∫Ñ‡∫ª‡ªâ‡∫ô‡∫´‡∫≤‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô</span></h3>
            <div class="flex gap-4 mb-4">
                <input type="text" id="searchInput" placeholder="‡∫Ñ‡∫ª‡ªâ‡∫ô‡∫´‡∫≤‡∫ä‡∫∑‡ªà‡∫ô‡∫±‡∫Å‡∫™‡∫∂‡∫Å‡∫™‡∫≤, ‡∫•‡∫≤‡∫ç‡∫Æ‡∫±‡∫ö, ‡∫•‡∫≤‡∫ç‡∫à‡ªà‡∫≤‡∫ç..." 
                       class="flex-1 px-4 py-2 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"
                       oninput="performSearch()">
                <button onclick="clearSearch()" class="btn-secondary px-4 py-2 rounded-lg text-white">
                    <span data-key="clear">‡∫•‡ªâ‡∫≤‡∫á</span>
                </button>
            </div>
            <div id="searchResults" class="hidden">
                <h4 class="text-white font-medium mb-3" data-key="searchResults">‡∫ú‡∫ª‡∫ô‡∫Å‡∫≤‡∫ô‡∫Ñ‡∫ª‡ªâ‡∫ô‡∫´‡∫≤:</h4>
                <div id="searchResultsContent" class="space-y-2 max-h-60 overflow-y-auto">
                    <!-- Search results will appear here -->
                </div>
            </div>
        </div>

        <!-- Navigation Buttons -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <button onclick="showStudentData()" class="btn-primary text-white p-6 rounded-2xl transition-all border border-red-500/30 glass-effect">
                <div class="text-4xl mb-2">üë•</div>
                <h3 class="text-xl font-semibold" data-key="studentData">‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô‡∫ô‡∫±‡∫Å‡∫™‡∫∂‡∫Å‡∫™‡∫≤</h3>
                <p class="text-green-100"><span id="dashboardStudentCount">0</span> <span data-key="students">‡∫ô‡∫±‡∫Å‡∫™‡∫∂‡∫Å‡∫™‡∫≤</span></p>
            </button>
            <button onclick="showIncome()" class="btn-accent text-white p-6 rounded-2xl transition-all border border-red-500/30 glass-effect">
                <div class="text-4xl mb-2">üí∞</div>
                <h3 class="text-xl font-semibold" data-key="income">‡∫•‡∫≤‡∫ç‡∫Æ‡∫±‡∫ö</h3>
                <p class="text-purple-100" data-key="trackEarnings">‡∫ï‡∫¥‡∫î‡∫ï‡∫≤‡∫°‡∫•‡∫≤‡∫ç‡∫Æ‡∫±‡∫ö</p>
            </button>
            <button onclick="showExpense()" class="btn-secondary text-white p-6 rounded-2xl transition-all border border-red-500/30 glass-effect">
                <div class="text-4xl mb-2">üí∏</div>
                <h3 class="text-xl font-semibold" data-key="expense">‡∫•‡∫≤‡∫ç‡∫à‡ªà‡∫≤‡∫ç</h3>
                <p class="text-red-100" data-key="trackSpending">‡∫ï‡∫¥‡∫î‡∫ï‡∫≤‡∫°‡∫•‡∫≤‡∫ç‡∫à‡ªà‡∫≤‡∫ç</p>
            </button>
            <button onclick="showReport()" class="btn-pink text-white p-6 rounded-2xl transition-all border border-red-500/30 glass-effect">
                <div class="text-4xl mb-2">üìä</div>
                <h3 class="text-xl font-semibold" data-key="report">‡∫•‡∫≤‡∫ç‡∫á‡∫≤‡∫ô</h3>
                <p class="text-pink-100" data-key="viewAnalytics">‡ªÄ‡∫ö‡∫¥‡ªà‡∫á‡∫Å‡∫≤‡∫ô‡∫ß‡∫¥‡ªÄ‡∫Ñ‡∫≤‡∫∞</p>
            </button>
        </div>
    </div>

    <!-- Student Data Page -->
    <div id="studentDataPage" class="hidden min-h-screen p-6 fade-in">
        <div class="glass-effect rounded-2xl p-6">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-white text-2xl font-bold">‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô‡∫ô‡∫±‡∫Å‡∫™‡∫∂‡∫Å‡∫™‡∫≤ (<span id="studentCount">0</span> ‡∫ô‡∫±‡∫Å‡∫™‡∫∂‡∫Å‡∫™‡∫≤)</h2>
                <div class="space-x-2">
                    <button onclick="showAddStudent()" class="btn-primary text-white px-4 py-2 rounded-lg">
                        ‚ûï ‡ªÄ‡∫û‡∫µ‡ªà‡∫°‡∫ô‡∫±‡∫Å‡∫™‡∫∂‡∫Å‡∫™‡∫≤
                    </button>
                    <button onclick="showMainDashboard()" class="btn-secondary text-white px-4 py-2 rounded-lg">
                        ‚Üê ‡∫Å‡∫±‡∫ö‡∫Ñ‡∫∑‡∫ô
                    </button>
                </div>
            </div>
            
            <div class="overflow-x-auto">
                <table class="w-full text-white text-sm">
                    <thead>
                        <tr class="bg-white/10">
                            <th class="p-3 text-left">‡∫•‡ªç‡∫≤‡∫î‡∫±‡∫ö</th>
                            <th class="p-3 text-left">‡∫ä‡∫∑‡ªà</th>
                            <th class="p-3 text-left">‡∫•‡∫∞‡∫´‡∫±‡∫î‡∫ô‡∫±‡∫Å‡∫™‡∫∂‡∫Å‡∫™‡∫≤</th>
                            <th class="p-3 text-left">‡ªÄ‡∫ö‡∫µ‡ªÇ‡∫ó</th>
                            <th class="p-3 text-left">‡∫™‡∫∞‡∫ñ‡∫≤‡∫ô‡∫∞</th>
                            <th class="p-3 text-left">‡∫Å‡∫≤‡∫ô‡∫î‡ªç‡∫≤‡ªÄ‡∫ô‡∫µ‡∫ô‡∫á‡∫≤‡∫ô</th>
                        </tr>
                    </thead>
                    <tbody id="studentTableBody">
                        <!-- Students will be populated here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Income Page -->
    <div id="incomePage" class="hidden min-h-screen p-6 fade-in">
        <div class="glass-effect rounded-2xl p-6">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-white text-2xl font-bold" data-key="incomeManagement">‡∫Å‡∫≤‡∫ô‡∫Ñ‡∫∏‡ªâ‡∫°‡∫Ñ‡∫≠‡∫á‡∫•‡∫≤‡∫ç‡∫Æ‡∫±‡∫ö</h2>
                <button onclick="showMainDashboard()" class="btn-secondary text-white px-4 py-2 rounded-lg">
                    ‚Üê <span data-key="back">‡∫Å‡∫±‡∫ö‡∫Ñ‡∫∑‡∫ô</span>
                </button>
            </div>

            <!-- Add Income Form -->
            <div class="glass-effect rounded-xl p-6 mb-6 border border-green-500/30">
                <h3 class="text-white text-lg font-semibold mb-4" data-key="addIncome">‡ªÄ‡∫û‡∫µ‡ªà‡∫°‡∫•‡∫≤‡∫ç‡∫Æ‡∫±‡∫ö</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="text-white block mb-2" data-key="incomeType">‡∫õ‡∫∞‡ªÄ‡∫û‡∫î‡∫•‡∫≤‡∫ç‡∫Æ‡∫±‡∫ö</label>
                        <select id="incomeType" class="w-full px-3 py-2 rounded-lg bg-gray-800 border border-white/20 text-white focus:ring-2 focus:ring-green-500 transition-all">
                            <option value="monthly_fund" class="bg-gray-800 text-white">‡ªÑ‡∫î‡ªâ‡∫Æ‡∫±‡∫ö‡∫à‡∫≤‡∫Å‡∫Å‡∫≤‡∫ô‡ªÄ‡∫Å‡∫±‡∫ö‡ªÄ‡∫á‡∫¥‡∫ô‡∫Ñ‡∫±‡∫á‡∫õ‡∫∞‡∫à‡ªç‡∫≤‡ªÄ‡∫î‡∫∑‡∫≠‡∫ô</option>
                            <option value="activities" class="bg-gray-800 text-white">‡ªÑ‡∫î‡ªâ‡∫Æ‡∫±‡∫ö‡∫à‡∫≤‡∫Å‡∫Å‡∫¥‡∫î‡∫à‡∫∞‡∫Å‡ªç‡∫≤‡∫ï‡ªà‡∫≤‡∫á‡ªÜ</option>
                            <option value="other" class="bg-gray-800 text-white">‡∫≠‡∫∑‡ªà‡∫ô‡ªÜ</option>
                        </select>
                    </div>
                    <div>
                        <label class="text-white block mb-2" data-key="paymentMethod">‡∫ß‡∫¥‡∫ó‡∫µ‡∫Å‡∫≤‡∫ô‡∫à‡ªà‡∫≤‡∫ç</label>
                        <select id="paymentMethod" class="w-full px-3 py-2 rounded-lg bg-gray-800 border border-white/20 text-white focus:ring-2 focus:ring-green-500 transition-all">
                            <option value="cash" class="bg-gray-800 text-white">‡ªÄ‡∫á‡∫¥‡∫ô‡∫™‡∫ª‡∫î</option>
                            <option value="transfer" class="bg-gray-800 text-white">‡ªÇ‡∫≠‡∫ô‡ªÄ‡∫á‡∫¥‡∫ô</option>
                        </select>
                    </div>
                    <div>
                        <label class="text-white block mb-2" data-key="amount">‡∫à‡ªç‡∫≤‡∫ô‡∫ß‡∫ô (‡∫Å‡∫µ‡∫ö)</label>
                        <input type="number" id="incomeAmount" placeholder="‡ªÉ‡∫™‡ªà‡∫à‡ªç‡∫≤‡∫ô‡∫ß‡∫ô‡ªÄ‡∫á‡∫¥‡∫ô" 
                               class="w-full px-3 py-2 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/70 focus:ring-2 focus:ring-green-500 transition-all">
                    </div>
                    <div>
                        <label class="text-white block mb-2" data-key="date">‡∫ß‡∫±‡∫ô‡∫ó‡∫µ</label>
                        <input type="date" id="incomeDate" 
                               class="w-full px-3 py-2 rounded-lg bg-white/10 border border-white/20 text-white focus:ring-2 focus:ring-green-500 transition-all">
                    </div>
                </div>
                <div class="flex gap-4 mt-4">
                    <button onclick="addIncome()" class="btn-primary text-white px-6 py-2 rounded-lg">
                        <span data-key="save">‡∫ö‡∫±‡∫ô‡∫ó‡∫∂‡∫Å</span>
                    </button>
                    <button onclick="cancelIncomeForm()" class="btn-secondary text-white px-6 py-2 rounded-lg">
                        <span data-key="cancel">‡∫ç‡∫ª‡∫Å‡ªÄ‡∫•‡∫µ‡∫Å</span>
                    </button>
                </div>
            </div>

            <!-- Income Summary -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                <div class="glass-effect rounded-xl p-4 border border-green-500/30">
                    <h4 class="text-white font-semibold" data-key="totalIncome">‡∫•‡∫≤‡∫ç‡∫Æ‡∫±‡∫ö‡∫ó‡∫±‡∫á‡ªù‡∫ª‡∫î</h4>
                    <p class="text-2xl text-green-300 font-bold" id="totalIncome">0 ‡∫Å‡∫µ‡∫ö</p>
                </div>
                <div class="glass-effect rounded-xl p-4 border border-blue-500/30">
                    <h4 class="text-white font-semibold" data-key="thisMonth">‡ªÄ‡∫î‡∫∑‡∫≠‡∫ô‡∫ô‡∫µ‡ªâ</h4>
                    <p class="text-2xl text-blue-300 font-bold" id="monthlyIncome">0 ‡∫Å‡∫µ‡∫ö</p>
                </div>
                <div class="glass-effect rounded-xl p-4 border border-yellow-500/30">
                    <h4 class="text-white font-semibold" data-key="pendingPayments">‡∫Å‡∫≤‡∫ô‡∫à‡ªà‡∫≤‡∫ç‡∫ó‡∫µ‡ªà‡∫Ñ‡ªâ‡∫≤‡∫á</h4>
                    <p class="text-2xl text-yellow-300 font-bold" id="pendingPayments">0</p>
                </div>
            </div>

            <!-- Student Payment Status -->
            <div class="glass-effect rounded-xl p-6 border border-purple-500/30">
                <h3 class="text-white text-lg font-semibold mb-4" data-key="studentPaymentStatus">‡∫™‡∫∞‡∫ñ‡∫≤‡∫ô‡∫∞‡∫Å‡∫≤‡∫ô‡∫à‡ªà‡∫≤‡∫ç‡ªÄ‡∫á‡∫¥‡∫ô‡∫Ç‡∫≠‡∫á‡∫ô‡∫±‡∫Å‡∫™‡∫∂‡∫Å‡∫™‡∫≤</h3>
                <div id="paymentStatusGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3">
                    <!-- Payment status will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Expense Page -->
    <div id="expensePage" class="hidden min-h-screen p-6 fade-in">
        <div class="glass-effect rounded-2xl p-6">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-white text-2xl font-bold" data-key="expenseManagement">‡∫Å‡∫≤‡∫ô‡∫Ñ‡∫∏‡ªâ‡∫°‡∫Ñ‡∫≠‡∫á‡∫•‡∫≤‡∫ç‡∫à‡ªà‡∫≤‡∫ç</h2>
                <button onclick="showMainDashboard()" class="btn-secondary text-white px-4 py-2 rounded-lg">
                    ‚Üê <span data-key="back">‡∫Å‡∫±‡∫ö‡∫Ñ‡∫∑‡∫ô</span>
                </button>
            </div>

            <!-- Add Expense Form -->
            <div class="glass-effect rounded-xl p-6 mb-6 border border-red-500/30">
                <h3 class="text-white text-lg font-semibold mb-4" data-key="addExpense">‡ªÄ‡∫û‡∫µ‡ªà‡∫°‡∫•‡∫≤‡∫ç‡∫à‡ªà‡∫≤‡∫ç</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="text-white block mb-2" data-key="expenseType">‡∫õ‡∫∞‡ªÄ‡∫û‡∫î‡∫•‡∫≤‡∫ç‡∫à‡ªà‡∫≤‡∫ç</label>
                        <select id="expenseType" class="w-full px-3 py-2 rounded-lg bg-gray-800 border border-white/20 text-white focus:ring-2 focus:ring-red-500 transition-all">
                            <option value="documents" class="bg-gray-800 text-white">‡∫à‡ªà‡∫≤‡∫ç‡∫Ñ‡ªà‡∫≤‡ªÄ‡∫≠‡∫Å‡∫∞‡∫™‡∫≤‡∫ô</option>
                            <option value="water" class="bg-gray-800 text-white">‡∫à‡ªà‡∫≤‡∫ç‡∫Ñ‡ªà‡∫≤‡∫ô‡ªç‡ªâ‡∫≤‡∫î‡∫∑‡ªà‡∫°</option>
                            <option value="envelopes" class="bg-gray-800 text-white">‡∫à‡ªà‡∫≤‡∫ç‡∫Ñ‡ªà‡∫≤‡∫ä‡∫≠‡∫á‡∫Ç‡∫≤‡∫ß</option>
                            <option value="written_exam" class="bg-gray-800 text-white">‡∫à‡ªà‡∫≤‡∫ç‡∫Ñ‡ªà‡∫≤‡ªÄ‡∫™‡∫±‡∫á‡∫Ç‡∫Ω‡∫ô</option>
                            <option value="oral_exam" class="bg-gray-800 text-white">‡∫à‡ªà‡∫≤‡∫ç‡∫Ñ‡ªà‡∫≤‡ªÄ‡∫™‡∫±‡∫á‡∫õ‡∫≤‡∫Å‡ªÄ‡∫õ‡∫ª‡ªà‡∫≤</option>
                            <option value="fuel_lecturers" class="bg-gray-800 text-white">‡∫à‡ªà‡∫≤‡∫ç‡∫Ñ‡ªà‡∫≤‡∫ô‡ªç‡ªâ‡∫≤‡∫°‡∫±‡∫ô‡∫•‡∫ª‡∫î‡∫≠‡∫≤‡∫à‡∫≤‡∫ô‡∫Æ‡∫±‡∫ö‡ªÄ‡∫ä‡∫µ‡∫ô</option>
                            <option value="other" class="bg-gray-800 text-white">‡∫≠‡∫∑‡ªà‡∫ô‡ªÜ</option>
                        </select>
                    </div>
                    <div>
                        <label class="text-white block mb-2" data-key="amount">‡∫à‡ªç‡∫≤‡∫ô‡∫ß‡∫ô (‡∫Å‡∫µ‡∫ö)</label>
                        <input type="number" id="expenseAmount" placeholder="‡ªÉ‡∫™‡ªà‡∫à‡ªç‡∫≤‡∫ô‡∫ß‡∫ô‡ªÄ‡∫á‡∫¥‡∫ô" 
                               class="w-full px-3 py-2 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/70 focus:ring-2 focus:ring-red-500 transition-all">
                    </div>
                    <div>
                        <label class="text-white block mb-2" data-key="date">‡∫ß‡∫±‡∫ô‡∫ó‡∫µ</label>
                        <input type="date" id="expenseDate" 
                               class="w-full px-3 py-2 rounded-lg bg-white/10 border border-white/20 text-white focus:ring-2 focus:ring-red-500 transition-all">
                    </div>
                    <div>
                        <label class="text-white block mb-2" data-key="description">‡∫•‡∫≤‡∫ç‡∫•‡∫∞‡∫≠‡∫Ω‡∫î</label>
                        <input type="text" id="expenseDescription" placeholder="‡∫•‡∫≤‡∫ç‡∫•‡∫∞‡∫≠‡∫Ω‡∫î‡ªÄ‡∫û‡∫µ‡ªà‡∫°‡ªÄ‡∫ï‡∫µ‡∫°" 
                               class="w-full px-3 py-2 rounded-lg bg-white/10 border border-white/20 text-white placeholder-white/70 focus:ring-2 focus:ring-red-500 transition-all">
                    </div>
                </div>
                <div class="flex gap-4 mt-4">
                    <button onclick="addExpense()" class="btn-secondary text-white px-6 py-2 rounded-lg">
                        <span data-key="save">‡∫ö‡∫±‡∫ô‡∫ó‡∫∂‡∫Å</span>
                    </button>
                    <button onclick="cancelExpenseForm()" class="btn-primary text-white px-6 py-2 rounded-lg">
                        <span data-key="cancel">‡∫ç‡∫ª‡∫Å‡ªÄ‡∫•‡∫µ‡∫Å</span>
                    </button>
                </div>
            </div>

            <!-- Expense Summary -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                <div class="glass-effect rounded-xl p-4 border border-red-500/30">
                    <h4 class="text-white font-semibold" data-key="totalExpenses">‡∫•‡∫≤‡∫ç‡∫à‡ªà‡∫≤‡∫ç‡∫ó‡∫±‡∫á‡ªù‡∫ª‡∫î</h4>
                    <p class="text-2xl text-red-300 font-bold" id="totalExpenses">0 ‡∫Å‡∫µ‡∫ö</p>
                </div>
                <div class="glass-effect rounded-xl p-4 border border-orange-500/30">
                    <h4 class="text-white font-semibold" data-key="thisMonth">‡ªÄ‡∫î‡∫∑‡∫≠‡∫ô‡∫ô‡∫µ‡ªâ</h4>
                    <p class="text-2xl text-orange-300 font-bold" id="monthlyExpenses">0 ‡∫Å‡∫µ‡∫ö</p>
                </div>
                <div class="glass-effect rounded-xl p-4 border border-purple-500/30">
                    <h4 class="text-white font-semibold" data-key="netBalance">‡∫ç‡∫≠‡∫î‡ªÄ‡∫á‡∫¥‡∫ô‡∫™‡∫∏‡∫î‡∫ó‡∫¥</h4>
                    <p class="text-2xl text-purple-300 font-bold" id="netBalance">0 ‡∫Å‡∫µ‡∫ö</p>
                </div>
            </div>

            <!-- Recent Expenses -->
            <div class="glass-effect rounded-xl p-6 border border-yellow-500/30">
                <h3 class="text-white text-lg font-semibold mb-4" data-key="recentExpenses">‡∫•‡∫≤‡∫ç‡∫à‡ªà‡∫≤‡∫ç‡∫´‡∫º‡ªâ‡∫≤‡∫™‡∫∏‡∫î</h3>
                <div id="expensesList" class="space-y-3">
                    <!-- Expenses will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Report Summary Page -->
    <div id="reportPage" class="hidden min-h-screen p-6 fade-in">
        <div class="glass-effect rounded-2xl p-6 border border-red-500/30">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-white text-2xl font-bold" data-key="financialReport">‡∫•‡∫≤‡∫ç‡∫á‡∫≤‡∫ô‡∫Å‡∫≤‡∫ô‡ªÄ‡∫á‡∫¥‡∫ô</h2>
                <div class="flex gap-2">
                    <button onclick="showBarChartReport()" class="btn-accent px-4 py-2 rounded-lg text-white">
                        üìä <span data-key="barChart">‡ªÅ‡∫ó‡ªà‡∫á</span>
                    </button>
                    <button onclick="showPieChartReport()" class="btn-pink px-4 py-2 rounded-lg text-white">
                        ü•ß <span data-key="pieChart">‡∫ß‡∫ª‡∫á‡∫°‡∫ª‡∫ô</span>
                    </button>
                    <button onclick="showMainDashboard()" class="btn-secondary text-white px-4 py-2 rounded-lg">
                        ‚Üê <span data-key="back">‡∫Å‡∫±‡∫ö‡∫Ñ‡∫∑‡∫ô</span>
                    </button>
                </div>
            </div>

            <!-- Report Period Selector -->
            <div class="mb-6 flex flex-wrap gap-4">
                <button onclick="setReportPeriod('daily')" id="dailyBtn" class="btn-primary px-4 py-2 rounded-lg text-white" data-key="daily">‡∫•‡∫≤‡∫ç‡∫ß‡∫±‡∫ô</button>
                <button onclick="setReportPeriod('weekly')" id="weeklyBtn" class="glass-effect px-4 py-2 rounded-lg text-white border border-white/20" data-key="weekly">‡∫•‡∫≤‡∫ç‡∫≠‡∫≤‡∫ó‡∫¥‡∫î</button>
                <button onclick="setReportPeriod('monthly')" id="monthlyBtn" class="glass-effect px-4 py-2 rounded-lg text-white border border-white/20" data-key="monthly">‡∫•‡∫≤‡∫ç‡ªÄ‡∫î‡∫∑‡∫≠‡∫ô</button>
                <button onclick="setReportPeriod('yearly')" id="yearlyBtn" class="glass-effect px-4 py-2 rounded-lg text-white border border-white/20" data-key="yearly">‡∫•‡∫≤‡∫ç‡∫õ‡∫µ</button>
                <input type="date" id="calendarView" class="glass-effect px-3 py-2 rounded-lg text-white border border-white/20 focus:ring-2 focus:ring-blue-500 transition-all" onchange="viewByDate()">
            </div>

            <!-- Summary Cards -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                <div class="glass-effect rounded-xl p-4 text-center border border-green-500/30">
                    <h4 class="text-white font-semibold" data-key="totalIncome">‡∫•‡∫≤‡∫ç‡∫Æ‡∫±‡∫ö‡∫ó‡∫±‡∫á‡ªù‡∫ª‡∫î</h4>
                    <p class="text-2xl text-green-300 font-bold" id="reportTotalIncome">0 ‡∫Å‡∫µ‡∫ö</p>
                </div>
                <div class="glass-effect rounded-xl p-4 text-center border border-red-500/30">
                    <h4 class="text-white font-semibold" data-key="totalExpenses">‡∫•‡∫≤‡∫ç‡∫à‡ªà‡∫≤‡∫ç‡∫ó‡∫±‡∫á‡ªù‡∫ª‡∫î</h4>
                    <p class="text-2xl text-red-300 font-bold" id="reportTotalExpenses">0 ‡∫Å‡∫µ‡∫ö</p>
                </div>
                <div class="glass-effect rounded-xl p-4 text-center border border-blue-500/30">
                    <h4 class="text-white font-semibold" data-key="netBalance">‡∫ç‡∫≠‡∫î‡ªÄ‡∫á‡∫¥‡∫ô‡∫™‡∫∏‡∫î‡∫ó‡∫¥</h4>
                    <p class="text-2xl text-blue-300 font-bold" id="reportNetBalance">0 ‡∫Å‡∫µ‡∫ö</p>
                </div>
                <div class="glass-effect rounded-xl p-4 text-center border border-yellow-500/30">
                    <h4 class="text-white font-semibold" data-key="activeStudents">‡∫ô‡∫±‡∫Å‡∫™‡∫∂‡∫Å‡∫™‡∫≤‡∫ó‡∫µ‡ªà‡ªÄ‡∫Ñ‡∫∑‡ªà‡∫≠‡∫ô‡ªÑ‡∫´‡∫ß</h4>
                    <p class="text-2xl text-yellow-300 font-bold" id="reportActiveStudents">0</p>
                </div>
            </div>

            <!-- Detailed Table -->
            <div class="glass-effect rounded-xl p-6 border border-green-500/30">
                <h3 class="text-white text-lg font-semibold mb-4" data-key="detailedTransactions">‡∫•‡∫≤‡∫ç‡∫Å‡∫≤‡∫ô‡∫ó‡∫∏‡∫•‡∫∞‡∫Å‡ªç‡∫≤‡∫•‡∫∞‡∫≠‡∫Ω‡∫î</h3>
                <div class="overflow-x-auto">
                    <table class="w-full text-white text-sm">
                        <thead>
                            <tr class="border-b border-white/20">
                                <th class="p-3 text-left" data-key="date">‡∫ß‡∫±‡∫ô‡∫ó‡∫µ</th>
                                <th class="p-3 text-left" data-key="time">‡ªÄ‡∫ß‡∫•‡∫≤</th>
                                <th class="p-3 text-left" data-key="type">‡∫õ‡∫∞‡ªÄ‡∫û‡∫î</th>
                                <th class="p-3 text-left" data-key="description">‡∫•‡∫≤‡∫ç‡∫•‡∫∞‡∫≠‡∫Ω‡∫î</th>
                                <th class="p-3 text-right" data-key="amount">‡∫à‡ªç‡∫≤‡∫ô‡∫ß‡∫ô (‡∫Å‡∫µ‡∫ö)</th>
                            </tr>
                        </thead>
                        <tbody id="detailedTransactionsTable">
                            <!-- Detailed transactions will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Bar Chart Report Page -->
    <div id="barChartPage" class="hidden min-h-screen p-6 fade-in">
        <div class="glass-effect rounded-2xl p-6 border border-purple-500/30">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-white text-2xl font-bold" data-key="barChartReport">‡∫•‡∫≤‡∫ç‡∫á‡∫≤‡∫ô‡ªÅ‡∫ó‡ªà‡∫á</h2>
                <div class="flex gap-2">
                    <button onclick="showReport()" class="btn-orange px-4 py-2 rounded-lg text-white">
                        üìã <span data-key="summary">‡∫™‡∫∞‡∫´‡∫º‡∫∏‡∫ö</span>
                    </button>
                    <button onclick="showPieChartReport()" class="btn-pink px-4 py-2 rounded-lg text-white">
                        ü•ß <span data-key="pieChart">‡∫ß‡∫ª‡∫á‡∫°‡∫ª‡∫ô</span>
                    </button>
                    <button onclick="showMainDashboard()" class="btn-secondary text-white px-4 py-2 rounded-lg">
                        ‚Üê <span data-key="back">‡∫Å‡∫±‡∫ö‡∫Ñ‡∫∑‡∫ô</span>
                    </button>
                </div>
            </div>
            
            <div class="glass-effect rounded-xl p-4 border border-purple-500/30">
                <h3 class="text-white text-lg font-semibold mb-3" data-key="incomeVsExpenses">‡∫•‡∫≤‡∫ç‡∫Æ‡∫±‡∫ö ‡∫õ‡∫Ω‡∫ö‡∫ó‡∫Ω‡∫ö ‡∫•‡∫≤‡∫ç‡∫à‡ªà‡∫≤‡∫ç</h3>
                <canvas id="barChart" class="w-full h-40"></canvas>
            </div>
        </div>
    </div>

    <!-- Pie Chart Report Page -->
    <div id="pieChartPage" class="hidden min-h-screen p-6 fade-in">
        <div class="glass-effect rounded-2xl p-6 border border-pink-500/30">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-white text-2xl font-bold" data-key="pieChartReport">‡∫•‡∫≤‡∫ç‡∫á‡∫≤‡∫ô‡∫ß‡∫ª‡∫á‡∫°‡∫ª‡∫ô</h2>
                <div class="flex gap-2">
                    <button onclick="showReport()" class="btn-orange px-4 py-2 rounded-lg text-white">
                        üìã <span data-key="summary">‡∫™‡∫∞‡∫´‡∫º‡∫∏‡∫ö</span>
                    </button>
                    <button onclick="showBarChartReport()" class="btn-accent px-4 py-2 rounded-lg text-white">
                        üìä <span data-key="barChart">‡ªÅ‡∫ó‡ªà‡∫á</span>
                    </button>
                    <button onclick="showMainDashboard()" class="btn-secondary text-white px-4 py-2 rounded-lg">
                        ‚Üê <span data-key="back">‡∫Å‡∫±‡∫ö‡∫Ñ‡∫∑‡∫ô</span>
                    </button>
                </div>
            </div>
            
            <div class="glass-effect rounded-xl p-4 border border-pink-500/30">
                <h3 class="text-white text-lg font-semibold mb-3" data-key="expenseBreakdown">‡∫Å‡∫≤‡∫ô‡ªÅ‡∫ö‡ªà‡∫á‡∫õ‡∫±‡∫ô‡∫•‡∫≤‡∫ç‡∫à‡ªà‡∫≤‡∫ç</h3>
                <canvas id="pieChart" class="w-full h-40"></canvas>
            </div>
        </div>
    </div>

    <script>
        // Language translations
        const translations = {
            lo: {
                language: '‡∫û‡∫≤‡∫™‡∫≤',
                lao: '‡∫•‡∫≤‡∫ß',
                english: 'English',
                vietnamese: 'Ti·∫øng Vi·ªát',
                chinese: '‰∏≠Êñá',
                thai: '‡πÑ‡∏ó‡∏¢',
                changeBackground: '‡∫õ‡ªà‡∫Ω‡∫ô‡∫û‡∫∑‡ªâ‡∫ô‡∫´‡∫•‡∫±‡∫á',
                changeLogo: '‡∫õ‡ªà‡∫Ω‡∫ô‡ªÇ‡∫•‡ªÇ‡∫Å‡ªâ',
                appName: 'Sedthasard App v7.0',
                login: '‡ªÄ‡∫Ç‡∫ª‡ªâ‡∫≤‡∫™‡∫π‡ªà‡∫•‡∫∞‡∫ö‡∫ª‡∫ö',
                enterPassword: '‡ªÉ‡∫™‡ªà‡∫•‡∫∞‡∫´‡∫±‡∫î‡∫ú‡ªà‡∫≤‡∫ô',
                incorrectPassword: '‡∫•‡∫∞‡∫´‡∫±‡∫î‡∫ú‡ªà‡∫≤‡∫ô‡∫ö‡ªç‡ªà‡∫ñ‡∫∑‡∫Å‡∫ï‡ªâ‡∫≠‡∫á. ‡∫ö‡ªç‡ªà‡∫™‡∫≤‡∫°‡∫≤‡∫î‡ªÄ‡∫Ç‡∫ª‡ªâ‡∫≤‡∫™‡∫π‡ªà‡ªÅ‡∫≠‡∫±‡∫ö‡ªÑ‡∫î‡ªâ.',
                loginButton: '‡ªÄ‡∫Ç‡∫ª‡ªâ‡∫≤‡∫™‡∫π‡ªà‡∫•‡∫∞‡∫ö‡∫ª‡∫ö',
                footerMessage: '‡ªÅ‡∫≠‡∫±‡∫ö‡∫ô‡∫µ‡ªâ‡ªÅ‡∫°‡ªà‡∫ô‡∫™‡ªç‡∫≤‡∫•‡∫±‡∫ö‡∫Å‡∫≤‡∫ô‡∫ö‡∫±‡∫ô‡∫ó‡∫∂‡∫Å‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô‡ªÅ‡∫•‡∫∞‡∫•‡∫≤‡∫ç‡∫Æ‡∫±‡∫ö-‡∫•‡∫≤‡∫ç‡∫à‡ªà‡∫≤‡∫ç‡∫Ç‡∫≠‡∫á‡∫ô‡∫±‡∫Å‡∫™‡∫∂‡∫Å‡∫™‡∫≤‡ªÄ‡∫™‡∫î‡∫ñ‡∫∞‡∫Å‡∫¥‡∫î‡ªÅ‡∫•‡∫∞‡∫Å‡∫≤‡∫ô‡∫Ñ‡∫∏‡ªâ‡∫°‡∫Ñ‡∫≠‡∫á‡ªÄ‡∫™‡∫î‡∫ñ‡∫∞‡∫Å‡∫¥‡∫î‡ªÄ‡∫ó‡∫ª‡ªà‡∫≤‡∫ô‡∫±‡ªâ‡∫ô',
                welcomeMessage: '‡∫ç‡∫¥‡∫ô‡∫î‡∫µ‡∫ï‡ªâ‡∫≠‡∫ô‡∫Æ‡∫±‡∫ö‡∫™‡∫π‡ªà‡ªÅ‡∫≠‡∫±‡∫ö‡ªÄ‡∫™‡∫î‡∫ñ‡∫∞‡∫Å‡∫¥‡∫î‡ªÅ‡∫•‡∫∞‡∫Å‡∫≤‡∫ô‡∫Ñ‡∫∏‡ªâ‡∫°‡∫Ñ‡∫≠‡∫á‡ªÄ‡∫™‡∫î‡∫ñ‡∫∞‡∫Å‡∫¥‡∫î - Version 7.0 ‡∫û‡ªâ‡∫≠‡∫°‡∫ü‡∫µ‡ªÄ‡∫à‡∫µ‡ªÉ‡ªù‡ªà‡∫ó‡∫µ‡ªà‡∫ó‡∫±‡∫ô‡∫™‡∫∞‡ªÑ‡ªù',
                searchData: '‡∫Ñ‡∫ª‡ªâ‡∫ô‡∫´‡∫≤‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô',
                searchResults: '‡∫ú‡∫ª‡∫ô‡∫Å‡∫≤‡∫ô‡∫Ñ‡∫ª‡ªâ‡∫ô‡∫´‡∫≤',
                clear: '‡∫•‡ªâ‡∫≤‡∫á',
                studentData: '‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô‡∫ô‡∫±‡∫Å‡∫™‡∫∂‡∫Å‡∫™‡∫≤',
                students: '‡∫ô‡∫±‡∫Å‡∫™‡∫∂‡∫Å‡∫™‡∫≤',
                income: '‡∫•‡∫≤‡∫ç‡∫Æ‡∫±‡∫ö',
                trackEarnings: '‡∫ï‡∫¥‡∫î‡∫ï‡∫≤‡∫°‡∫•‡∫≤‡∫ç‡∫Æ‡∫±‡∫ö',
                expense: '‡∫•‡∫≤‡∫ç‡∫à‡ªà‡∫≤‡∫ç',
                trackSpending: '‡∫ï‡∫¥‡∫î‡∫ï‡∫≤‡∫°‡∫•‡∫≤‡∫ç‡∫à‡ªà‡∫≤‡∫ç',
                report: '‡∫•‡∫≤‡∫ç‡∫á‡∫≤‡∫ô',
                viewAnalytics: '‡ªÄ‡∫ö‡∫¥‡ªà‡∫á‡∫Å‡∫≤‡∫ô‡∫ß‡∫¥‡ªÄ‡∫Ñ‡∫≤‡∫∞',
                back: '‡∫Å‡∫±‡∫ö‡∫Ñ‡∫∑‡∫ô',
                save: '‡∫ö‡∫±‡∫ô‡∫ó‡∫∂‡∫Å',
                cancel: '‡∫ç‡∫ª‡∫Å‡ªÄ‡∫•‡∫µ‡∫Å',
                incomeManagement: '‡∫Å‡∫≤‡∫ô‡∫Ñ‡∫∏‡ªâ‡∫°‡∫Ñ‡∫≠‡∫á‡∫•‡∫≤‡∫ç‡∫Æ‡∫±‡∫ö',
                expenseManagement: '‡∫Å‡∫≤‡∫ô‡∫Ñ‡∫∏‡ªâ‡∫°‡∫Ñ‡∫≠‡∫á‡∫•‡∫≤‡∫ç‡∫à‡ªà‡∫≤‡∫ç',
                addIncome: '‡ªÄ‡∫û‡∫µ‡ªà‡∫°‡∫•‡∫≤‡∫ç‡∫Æ‡∫±‡∫ö',
                addExpense: '‡ªÄ‡∫û‡∫µ‡ªà‡∫°‡∫•‡∫≤‡∫ç‡∫à‡ªà‡∫≤‡∫ç',
                incomeType: '‡∫õ‡∫∞‡ªÄ‡∫û‡∫î‡∫•‡∫≤‡∫ç‡∫Æ‡∫±‡∫ö',
                expenseType: '‡∫õ‡∫∞‡ªÄ‡∫û‡∫î‡∫•‡∫≤‡∫ç‡∫à‡ªà‡∫≤‡∫ç',
                paymentMethod: '‡∫ß‡∫¥‡∫ó‡∫µ‡∫Å‡∫≤‡∫ô‡∫à‡ªà‡∫≤‡∫ç',
                amount: '‡∫à‡ªç‡∫≤‡∫ô‡∫ß‡∫ô (‡∫Å‡∫µ‡∫ö)',
                date: '‡∫ß‡∫±‡∫ô‡∫ó‡∫µ',
                description: '‡∫•‡∫≤‡∫ç‡∫•‡∫∞‡∫≠‡∫Ω‡∫î',
                totalIncome: '‡∫•‡∫≤‡∫ç‡∫Æ‡∫±‡∫ö‡∫ó‡∫±‡∫á‡ªù‡∫ª‡∫î',
                totalExpenses: '‡∫•‡∫≤‡∫ç‡∫à‡ªà‡∫≤‡∫ç‡∫ó‡∫±‡∫á‡ªù‡∫ª‡∫î',
                thisMonth: '‡ªÄ‡∫î‡∫∑‡∫≠‡∫ô‡∫ô‡∫µ‡ªâ',
                netBalance: '‡∫ç‡∫≠‡∫î‡ªÄ‡∫á‡∫¥‡∫ô‡∫™‡∫∏‡∫î‡∫ó‡∫¥',
                pendingPayments: '‡∫Å‡∫≤‡∫ô‡∫à‡ªà‡∫≤‡∫ç‡∫ó‡∫µ‡ªà‡∫Ñ‡ªâ‡∫≤‡∫á',
                activeStudents: '‡∫ô‡∫±‡∫Å‡∫™‡∫∂‡∫Å‡∫™‡∫≤‡∫ó‡∫µ‡ªà‡ªÄ‡∫Ñ‡∫∑‡ªà‡∫≠‡∫ô‡ªÑ‡∫´‡∫ß',
                studentPaymentStatus: '‡∫™‡∫∞‡∫ñ‡∫≤‡∫ô‡∫∞‡∫Å‡∫≤‡∫ô‡∫à‡ªà‡∫≤‡∫ç‡ªÄ‡∫á‡∫¥‡∫ô‡∫Ç‡∫≠‡∫á‡∫ô‡∫±‡∫Å‡∫™‡∫∂‡∫Å‡∫™‡∫≤',
                recentExpenses: '‡∫•‡∫≤‡∫ç‡∫à‡ªà‡∫≤‡∫ç‡∫´‡∫º‡ªâ‡∫≤‡∫™‡∫∏‡∫î',
                financialReport: '‡∫•‡∫≤‡∫ç‡∫á‡∫≤‡∫ô‡∫Å‡∫≤‡∫ô‡ªÄ‡∫á‡∫¥‡∫ô',
                barChartReport: '‡∫•‡∫≤‡∫ç‡∫á‡∫≤‡∫ô‡ªÅ‡∫ó‡ªà‡∫á',
                pieChartReport: '‡∫•‡∫≤‡∫ç‡∫á‡∫≤‡∫ô‡∫ß‡∫ª‡∫á‡∫°‡∫ª‡∫ô',
                barChart: '‡ªÅ‡∫ó‡ªà‡∫á',
                pieChart: '‡∫ß‡∫ª‡∫á‡∫°‡∫ª‡∫ô',
                summary: '‡∫™‡∫∞‡∫´‡∫º‡∫∏‡∫ö',
                daily: '‡∫•‡∫≤‡∫ç‡∫ß‡∫±‡∫ô',
                weekly: '‡∫•‡∫≤‡∫ç‡∫≠‡∫≤‡∫ó‡∫¥‡∫î',
                monthly: '‡∫•‡∫≤‡∫ç‡ªÄ‡∫î‡∫∑‡∫≠‡∫ô',
                yearly: '‡∫•‡∫≤‡∫ç‡∫õ‡∫µ',
                incomeVsExpenses: '‡∫•‡∫≤‡∫ç‡∫Æ‡∫±‡∫ö ‡∫õ‡∫Ω‡∫ö‡∫ó‡∫Ω‡∫ö ‡∫•‡∫≤‡∫ç‡∫à‡ªà‡∫≤‡∫ç',
                expenseBreakdown: '‡∫Å‡∫≤‡∫ô‡ªÅ‡∫ö‡ªà‡∫á‡∫õ‡∫±‡∫ô‡∫•‡∫≤‡∫ç‡∫à‡ªà‡∫≤‡∫ç',
                detailedTransactions: '‡∫•‡∫≤‡∫ç‡∫Å‡∫≤‡∫ô‡∫ó‡∫∏‡∫•‡∫∞‡∫Å‡ªç‡∫≤‡∫•‡∫∞‡∫≠‡∫Ω‡∫î',
                time: '‡ªÄ‡∫ß‡∫•‡∫≤',
                type: '‡∫õ‡∫∞‡ªÄ‡∫û‡∫î'
            },
            en: {
                language: 'Language',
                lao: 'Lao',
                english: 'English',
                vietnamese: 'Vietnamese',
                chinese: 'Chinese',
                thai: 'Thai',
                changeBackground: 'Change Background',
                changeLogo: 'Change Logo',
                appName: 'Sedthasard App v7.0',
                login: 'Login',
                enterPassword: 'Enter password',
                incorrectPassword: 'Incorrect password. Cannot enter the app.',
                loginButton: 'Login',
                footerMessage: 'This app is for recording data and income-expenditure of Economics and Economic Management students only',
                welcomeMessage: 'Welcome to the Economics and Economic Management App - Version 7.0 with modern features',
                searchData: 'Search Data',
                searchResults: 'Search Results',
                clear: 'Clear',
                studentData: 'Student Data',
                students: 'students',
                income: 'Income',
                trackEarnings: 'Track earnings',
                expense: 'Expense',
                trackSpending: 'Track spending',
                report: 'Report',
                viewAnalytics: 'View analytics',
                back: 'Back',
                save: 'Save',
                cancel: 'Cancel',
                incomeManagement: 'Income Management',
                expenseManagement: 'Expense Management',
                addIncome: 'Add Income',
                addExpense: 'Add Expense',
                incomeType: 'Income Type',
                expenseType: 'Expense Type',
                paymentMethod: 'Payment Method',
                amount: 'Amount (LAK)',
                date: 'Date',
                description: 'Description',
                totalIncome: 'Total Income',
                totalExpenses: 'Total Expenses',
                thisMonth: 'This Month',
                netBalance: 'Net Balance',
                pendingPayments: 'Pending Payments',
                activeStudents: 'Active Students',
                studentPaymentStatus: 'Student Payment Status',
                recentExpenses: 'Recent Expenses',
                financialReport: 'Financial Report',
                barChartReport: 'Bar Chart Report',
                pieChartReport: 'Pie Chart Report',
                barChart: 'Bar Chart',
                pieChart: 'Pie Chart',
                summary: 'Summary',
                daily: 'Daily',
                weekly: 'Weekly',
                monthly: 'Monthly',
                yearly: 'Yearly',
                incomeVsExpenses: 'Income vs Expenses',
                expenseBreakdown: 'Expense Breakdown',
                detailedTransactions: 'Detailed Transactions',
                time: 'Time',
                type: 'Type'
            }
        };

        // Current language and settings
        let currentLanguage = 'lo';
        let currentReportPeriod = 'daily';

        // Data storage
        const students = [];
        let incomeData = [];
        let expenseData = [];
        let studentPaymentStatus = {};
        let barChart, pieChart;

        // Language functionality
        function toggleLanguageMenu() {
            const menu = document.getElementById('languageMenu');
            const dashboardMenu = document.getElementById('dashboardLanguageMenu');
            
            if (menu && !menu.classList.contains('hidden')) {
                menu.classList.add('hidden');
            } else if (menu) {
                menu.classList.remove('hidden');
            }
            
            if (dashboardMenu && !dashboardMenu.classList.contains('hidden')) {
                dashboardMenu.classList.add('hidden');
            } else if (dashboardMenu) {
                dashboardMenu.classList.remove('hidden');
            }
        }

        function changeLanguage(lang) {
            currentLanguage = lang;
            const flags = {
                'lo': 'üá±üá¶',
                'en': 'üá∫üá∏',
                'vi': 'üáªüá≥',
                'zh': 'üá®üá≥',
                'th': 'üáπüá≠'
            };
            
            // Update flag and language display
            const currentFlag = document.getElementById('currentFlag');
            const currentLangEl = document.getElementById('currentLang');
            if (currentFlag) currentFlag.textContent = flags[lang];
            if (currentLangEl) currentLangEl.textContent = translations[lang].language;
            
            const dashboardFlag = document.getElementById('dashboardFlag');
            const dashboardLang = document.getElementById('dashboardLang');
            if (dashboardFlag) dashboardFlag.textContent = flags[lang];
            if (dashboardLang) dashboardLang.textContent = translations[lang].language;
            
            // Update all text elements
            document.querySelectorAll('[data-key]').forEach(element => {
                const key = element.getAttribute('data-key');
                if (translations[lang] && translations[lang][key]) {
                    element.textContent = translations[lang][key];
                }
            });
            
            // Update placeholders
            document.querySelectorAll('[data-key-placeholder]').forEach(element => {
                const key = element.getAttribute('data-key-placeholder');
                if (translations[lang] && translations[lang][key]) {
                    element.placeholder = translations[lang][key];
                }
            });
            
            // Hide language menus
            const languageMenu = document.getElementById('languageMenu');
            const dashboardLanguageMenu = document.getElementById('dashboardLanguageMenu');
            if (languageMenu) {
                languageMenu.classList.add('hidden');
            }
            if (dashboardLanguageMenu) {
                dashboardLanguageMenu.classList.add('hidden');
            }

            // Update currency display
            updateAllDisplays();
        }

        // Logo functionality
        function initializeLogoUpload() {
            const logoInput = document.getElementById('logoInput');
            if (logoInput) {
                logoInput.addEventListener('change', function(e) {
                    const file = e.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            const logoHTML = `<img src="${e.target.result}" class="w-12 h-12 rounded-full object-cover">`;
                            
                            // Update all logo instances
                            const appLogo = document.getElementById('appLogo');
                            const dashboardLogo = document.getElementById('dashboardLogo');
                            
                            if (appLogo) appLogo.innerHTML = logoHTML;
                            if (dashboardLogo) dashboardLogo.innerHTML = logoHTML;
                            
                            // Save logo to localStorage
                            try {
                                localStorage.setItem('sedthasardLogo', e.target.result);
                                alert(currentLanguage === 'lo' ? '‡∫ö‡∫±‡∫ô‡∫ó‡∫∂‡∫Å‡ªÇ‡∫•‡ªÇ‡∫Å‡ªâ‡ªÅ‡∫•‡ªâ‡∫ß!' : 'Logo saved!');
                            } catch (error) {
                                console.warn('Could not save logo to localStorage:', error);
                            }
                        };
                        reader.readAsDataURL(file);
                    }
                });
            }
        }

        // Load saved logo on page load
        function loadSavedLogo() {
            try {
                const savedLogo = localStorage.getItem('sedthasardLogo');
                if (savedLogo) {
                    const logoHTML = `<img src="${savedLogo}" class="w-12 h-12 rounded-full object-cover">`;
                    const appLogo = document.getElementById('appLogo');
                    const dashboardLogo = document.getElementById('dashboardLogo');
                    
                    if (appLogo) appLogo.innerHTML = logoHTML;
                    if (dashboardLogo) dashboardLogo.innerHTML = logoHTML;
                }
            } catch (error) {
                console.warn('Could not load saved logo:', error);
            }
        }

        // Search functionality
        function performSearch() {
            const searchInput = document.getElementById('searchInput');
            const resultsDiv = document.getElementById('searchResults');
            const resultsContent = document.getElementById('searchResultsContent');
            
            if (!searchInput || !resultsDiv || !resultsContent) return;
            
            const query = searchInput.value.toLowerCase().trim();
            
            if (!query) {
                resultsDiv.classList.add('hidden');
                return;
            }
            
            resultsDiv.classList.remove('hidden');
            resultsContent.innerHTML = '';
            
            let hasResults = false;
            
            // Search students
            students.forEach((student, index) => {
                const name = (student.name || student).toLowerCase();
                if (name.includes(query)) {
                    hasResults = true;
                    const div = document.createElement('div');
                    div.className = 'search-result p-3 rounded-lg';
                    div.innerHTML = `
                        <div class="text-white font-medium">üë• ${student.name || student}</div>
                        <div class="text-white/70 text-sm">‡∫ô‡∫±‡∫Å‡∫™‡∫∂‡∫Å‡∫™‡∫≤ - ${student.studentId || 'STU' + String(index + 1).padStart(3, '0')}</div>
                    `;
                    resultsContent.appendChild(div);
                }
            });
            
            // Search income
            incomeData.forEach(income => {
                if (income.type.toLowerCase().includes(query) || income.amount.toString().includes(query)) {
                    hasResults = true;
                    const div = document.createElement('div');
                    div.className = 'search-result p-3 rounded-lg';
                    div.innerHTML = `
                        <div class="text-white font-medium">üí∞ ‡∫•‡∫≤‡∫ç‡∫Æ‡∫±‡∫ö: ${income.amount.toLocaleString()} ‡∫Å‡∫µ‡∫ö</div>
                        <div class="text-white/70 text-sm">${income.type} - ${income.date}</div>
                    `;
                    resultsContent.appendChild(div);
                }
            });
            
            // Search expenses
            expenseData.forEach(expense => {
                if (expense.type.toLowerCase().includes(query) || expense.amount.toString().includes(query) || 
                    (expense.description && expense.description.toLowerCase().includes(query))) {
                    hasResults = true;
                    const div = document.createElement('div');
                    div.className = 'search-result p-3 rounded-lg';
                    div.innerHTML = `
                        <div class="text-white font-medium">üí∏ ‡∫•‡∫≤‡∫ç‡∫à‡ªà‡∫≤‡∫ç: ${expense.amount.toLocaleString()} ‡∫Å‡∫µ‡∫ö</div>
                        <div class="text-white/70 text-sm">${expense.type} - ${expense.date}</div>
                    `;
                    resultsContent.appendChild(div);
                }
            });
            
            if (!hasResults) {
                resultsContent.innerHTML = '<div class="text-white/70 text-center p-4">‡∫ö‡ªç‡ªà‡∫û‡∫ª‡∫ö‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô‡∫ó‡∫µ‡ªà‡∫Ñ‡∫ª‡ªâ‡∫ô‡∫´‡∫≤</div>';
            }
        }

        function clearSearch() {
            const searchInput = document.getElementById('searchInput');
            const searchResults = document.getElementById('searchResults');
            
            if (searchInput) searchInput.value = '';
            if (searchResults) searchResults.classList.add('hidden');
        }

        // Login functionality
        function handleEnterKey(event) {
            if (event.key === 'Enter') {
                login();
            }
        }

        function togglePassword() {
            const passwordInput = document.getElementById('loginPassword');
            const eyeIcon = document.getElementById('eyeIcon');
            
            if (passwordInput && eyeIcon) {
                if (passwordInput.type === 'password') {
                    passwordInput.type = 'text';
                    eyeIcon.textContent = 'üôà';
                } else {
                    passwordInput.type = 'password';
                    eyeIcon.textContent = 'üëÅÔ∏è';
                }
            }
        }

        function login() {
            const passwordInput = document.getElementById('loginPassword');
            const errorMessage = document.getElementById('errorMessage');
            const loginText = document.getElementById('loginText');
            const loginLoading = document.getElementById('loginLoading');
            
            if (!passwordInput) return;
            
            const password = passwordInput.value;
            
            // Show loading
            if (loginText) loginText.classList.add('hidden');
            if (loginLoading) loginLoading.classList.remove('hidden');
            
            setTimeout(() => {
                if (password === '02054539859') {
                    const loginPage = document.getElementById('loginPage');
                    const mainDashboard = document.getElementById('mainDashboard');
                    
                    if (loginPage) loginPage.classList.add('hidden');
                    if (mainDashboard) mainDashboard.classList.remove('hidden');
                    if (errorMessage) errorMessage.classList.add('hidden');
                    
                    loadSavedLogo();
                    updateDashboardCounts();
                } else {
                    if (errorMessage) errorMessage.classList.remove('hidden');
                }
                
                // Hide loading
                if (loginText) loginText.classList.remove('hidden');
                if (loginLoading) loginLoading.classList.add('hidden');
            }, 1000);
        }

        // Background image functionality
        function initializeBackgroundUpload() {
            const bgImageInput = document.getElementById('bgImageInput');
            if (bgImageInput) {
                bgImageInput.addEventListener('change', function(e) {
                    const file = e.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            document.body.style.backgroundImage = `url(${e.target.result})`;
                            document.body.classList.add('custom-bg');
                        };
                        reader.readAsDataURL(file);
                    }
                });
            }
        }

        // Navigation functions
        function showMainDashboard() {
            hideAllPages();
            const mainDashboard = document.getElementById('mainDashboard');
            if (mainDashboard) {
                mainDashboard.classList.remove('hidden');
                mainDashboard.classList.add('fade-in');
            }
            updateDashboardCounts();
        }

        function showStudentData() {
            hideAllPages();
            const studentDataPage = document.getElementById('studentDataPage');
            if (studentDataPage) {
                studentDataPage.classList.remove('hidden');
                studentDataPage.classList.add('fade-in');
            }
            populateStudentTable();
        }

        function showIncome() {
            hideAllPages();
            const incomePage = document.getElementById('incomePage');
            if (incomePage) {
                incomePage.classList.remove('hidden');
                incomePage.classList.add('fade-in');
            }
            updateIncomeDisplay();
            updatePaymentStatus();
            
            const incomeDate = document.getElementById('incomeDate');
            if (incomeDate) {
                incomeDate.value = new Date().toISOString().split('T')[0];
            }
        }

        function showExpense() {
            hideAllPages();
            const expensePage = document.getElementById('expensePage');
            if (expensePage) {
                expensePage.classList.remove('hidden');
                expensePage.classList.add('fade-in');
            }
            updateExpenseDisplay();
            
            const expenseDate = document.getElementById('expenseDate');
            if (expenseDate) {
                expenseDate.value = new Date().toISOString().split('T')[0];
            }
        }

        function showReport() {
            hideAllPages();
            const reportPage = document.getElementById('reportPage');
            if (reportPage) {
                reportPage.classList.remove('hidden');
                reportPage.classList.add('fade-in');
            }
            updateReportDisplay();
        }

        function showBarChartReport() {
            hideAllPages();
            const barChartPage = document.getElementById('barChartPage');
            if (barChartPage) {
                barChartPage.classList.remove('hidden');
                barChartPage.classList.add('fade-in');
            }
            setTimeout(() => createBarChart(), 100);
        }

        function showPieChartReport() {
            hideAllPages();
            const pieChartPage = document.getElementById('pieChartPage');
            if (pieChartPage) {
                pieChartPage.classList.remove('hidden');
                pieChartPage.classList.add('fade-in');
            }
            setTimeout(() => createPieChart(), 100);
        }

        function hideAllPages() {
            const pages = ['loginPage', 'mainDashboard', 'studentDataPage', 'incomePage', 'expensePage', 'reportPage', 'barChartPage', 'pieChartPage'];
            pages.forEach(page => {
                const element = document.getElementById(page);
                if (element) {
                    element.classList.add('hidden');
                    element.classList.remove('fade-in');
                }
            });
        }

        // Update dashboard counts
        function updateDashboardCounts() {
            const dashboardStudentCount = document.getElementById('dashboardStudentCount');
            if (dashboardStudentCount) {
                dashboardStudentCount.textContent = students.length;
            }
        }

        // Student data functions
        function populateStudentTable() {
            const tbody = document.getElementById('studentTableBody');
            const studentCountEl = document.getElementById('studentCount');
            
            if (tbody) tbody.innerHTML = '';
            if (studentCountEl) studentCountEl.textContent = students.length;
            
            if (students.length === 0) {
                if (tbody) {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td colspan="6" class="p-8 text-center text-white/70">
                            ‡∫ç‡∫±‡∫á‡∫ö‡ªç‡ªà‡∫°‡∫µ‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô‡∫ô‡∫±‡∫Å‡∫™‡∫∂‡∫Å‡∫™‡∫≤<br>
                            <span class="text-sm">‡∫Å‡∫ª‡∫î‡∫õ‡∫∏‡ªà‡∫° "‚ûï ‡ªÄ‡∫û‡∫µ‡ªà‡∫°‡∫ô‡∫±‡∫Å‡∫™‡∫∂‡∫Å‡∫™‡∫≤" ‡ªÄ‡∫û‡∫∑‡ªà‡∫≠‡ªÄ‡∫û‡∫µ‡ªà‡∫°‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô‡∫ô‡∫±‡∫Å‡∫™‡∫∂‡∫Å‡∫™‡∫≤</span>
                        </td>
                    `;
                    tbody.appendChild(row);
                }
                return;
            }
            
            students.forEach((student, index) => {
                if (tbody) {
                    const row = document.createElement('tr');
                    row.className = 'border-b border-white/10 hover:bg-white/5 transition-colors';
                    row.innerHTML = `
                        <td class="p-3">${index + 1}</td>
                        <td class="p-3">${student.name || student}</td>
                        <td class="p-3">${student.studentId || 'STU' + String(index + 1).padStart(3, '0')}</td>
                        <td class="p-3">${student.phone || '‡∫ö‡ªç‡ªà‡∫°‡∫µ‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô'}</td>
                        <td class="p-3">
                            <span class="px-2 py-1 rounded-full text-xs bg-green-600 text-green-100">
                                ‡ªÄ‡∫Ñ‡∫∑‡ªà‡∫≠‡∫ô‡ªÑ‡∫´‡∫ß
                            </span>
                        </td>
                        <td class="p-3">
                            <button onclick="editStudent(${index})" class="text-blue-300 hover:text-blue-100 mr-2 transition-colors">‚úèÔ∏è</button>
                            <button onclick="viewStudent(${index})" class="text-green-300 hover:text-green-100 mr-2 transition-colors">üëÅÔ∏è</button>
                            <button onclick="deleteStudent(${index})" class="text-red-300 hover:text-red-100 transition-colors">üóëÔ∏è</button>
                        </td>
                    `;
                    tbody.appendChild(row);
                }
            });
        }

        function editStudent(index) {
            const student = students[index];
            const name = prompt('‡ªÅ‡∫Å‡ªâ‡ªÑ‡∫Ç‡∫ä‡∫∑‡ªà‡∫ô‡∫±‡∫Å‡∫™‡∫∂‡∫Å‡∫™‡∫≤:', student.name || student);
            if (name && name.trim()) {
                if (typeof students[index] === 'string') {
                    students[index] = { name: name.trim(), studentId: 'STU' + String(index + 1).padStart(3, '0') };
                } else {
                    students[index].name = name.trim();
                }
                populateStudentTable();
                updatePaymentStatus();
                updateDashboardCounts();
            }
        }

        function viewStudent(index) {
            const student = students[index];
            const info = typeof student === 'string' ? 
                `‡∫ä‡∫∑‡ªà: ${student}\n‡∫•‡∫∞‡∫´‡∫±‡∫î‡∫ô‡∫±‡∫Å‡∫™‡∫∂‡∫Å‡∫™‡∫≤: STU${String(index + 1).padStart(3, '0')}` :
                `‡∫ä‡∫∑‡ªà: ${student.name}\n‡∫•‡∫∞‡∫´‡∫±‡∫î‡∫ô‡∫±‡∫Å‡∫™‡∫∂‡∫Å‡∫™‡∫≤: ${student.studentId}\n‡ªÄ‡∫ö‡∫µ‡ªÇ‡∫ó: ${student.phone || '‡∫ö‡ªç‡ªà‡∫°‡∫µ‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô'}`;
            alert(info);
        }

        function deleteStudent(index) {
            if (confirm('‡∫ó‡ªà‡∫≤‡∫ô‡ªÅ‡∫ô‡ªà‡ªÉ‡∫à‡∫ö‡ªç‡ªà‡∫ß‡ªà‡∫≤‡∫ï‡ªâ‡∫≠‡∫á‡∫Å‡∫≤‡∫ô‡∫•‡∫∂‡∫ö‡∫ô‡∫±‡∫Å‡∫™‡∫∂‡∫Å‡∫™‡∫≤‡∫Ñ‡∫ª‡∫ô‡∫ô‡∫µ‡ªâ?')) {
                students.splice(index, 1);
                delete studentPaymentStatus[index];
                
                // Reindex payment status
                const newStatus = {};
                Object.keys(studentPaymentStatus).forEach((key, i) => {
                    if (parseInt(key) > index) {
                        newStatus[parseInt(key) - 1] = studentPaymentStatus[key];
                    } else if (parseInt(key) < index) {
                        newStatus[key] = studentPaymentStatus[key];
                    }
                });
                studentPaymentStatus = newStatus;
                
                populateStudentTable();
                updatePaymentStatus();
                updateDashboardCounts();
            }
        }

        function showAddStudent() {
            const name = prompt('‡ªÉ‡∫™‡ªà‡∫ä‡∫∑‡ªà‡∫ô‡∫±‡∫Å‡∫™‡∫∂‡∫Å‡∫™‡∫≤:');
            if (name && name.trim()) {
                const studentId = prompt('‡ªÉ‡∫™‡ªà‡∫•‡∫∞‡∫´‡∫±‡∫î‡∫ô‡∫±‡∫Å‡∫™‡∫∂‡∫Å‡∫™‡∫≤:', 'STU' + String(students.length + 1).padStart(3, '0'));
                const phone = prompt('‡ªÉ‡∫™‡ªà‡ªÄ‡∫ö‡∫µ‡ªÇ‡∫ó (‡∫ö‡ªç‡ªà‡∫ö‡∫±‡∫á‡∫Ñ‡∫±‡∫ö):');
                
                const newStudent = {
                    name: name.trim(),
                    studentId: studentId || 'STU' + String(students.length + 1).padStart(3, '0'),
                    phone: phone || ''
                };
                
                students.push(newStudent);
                
                // Add to payment status
                studentPaymentStatus[students.length - 1] = {
                    name: newStudent.name,
                    paid: false,
                    amount: 0,
                    lastPayment: null
                };
                
                populateStudentTable();
                updatePaymentStatus();
                updateDashboardCounts();
            }
        }

        // Form cancel functions
        function cancelIncomeForm() {
            const incomeAmount = document.getElementById('incomeAmount');
            const incomeType = document.getElementById('incomeType');
            const paymentMethod = document.getElementById('paymentMethod');
            const incomeDate = document.getElementById('incomeDate');
            
            if (incomeAmount) incomeAmount.value = '';
            if (incomeType) incomeType.selectedIndex = 0;
            if (paymentMethod) paymentMethod.selectedIndex = 0;
            if (incomeDate) incomeDate.value = new Date().toISOString().split('T')[0];
        }

        function cancelExpenseForm() {
            const expenseAmount = document.getElementById('expenseAmount');
            const expenseDescription = document.getElementById('expenseDescription');
            const expenseType = document.getElementById('expenseType');
            const expenseDate = document.getElementById('expenseDate');
            
            if (expenseAmount) expenseAmount.value = '';
            if (expenseDescription) expenseDescription.value = '';
            if (expenseType) expenseType.selectedIndex = 0;
            if (expenseDate) expenseDate.value = new Date().toISOString().split('T')[0];
        }

        // Income functions
        function addIncome() {
            const typeEl = document.getElementById('incomeType');
            const methodEl = document.getElementById('paymentMethod');
            const amountEl = document.getElementById('incomeAmount');
            const dateEl = document.getElementById('incomeDate');
            
            if (!typeEl || !methodEl || !amountEl || !dateEl) return;
            
            const type = typeEl.value;
            const method = methodEl.value;
            const amount = parseFloat(amountEl.value);
            const date = dateEl.value;
            
            if (!amount || !date) {
                alert(currentLanguage === 'lo' ? '‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡ªÉ‡∫™‡ªà‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô‡ªÉ‡∫´‡ªâ‡∫Ñ‡∫ª‡∫ö‡∫ñ‡ªâ‡∫ß‡∫ô.' : 'Please fill in all required fields.');
                return;
            }
            
            const income = {
                id: Date.now(),
                type,
                method,
                amount,
                date,
                timestamp: new Date()
            };
            
            incomeData.push(income);
            updateAllDisplays();
            cancelIncomeForm();
            
            alert(currentLanguage === 'lo' ? '‡∫ö‡∫±‡∫ô‡∫ó‡∫∂‡∫Å‡∫•‡∫≤‡∫ç‡∫Æ‡∫±‡∫ö‡∫™‡ªç‡∫≤‡ªÄ‡∫•‡∫±‡∫î!' : 'Income added successfully!');
        }

        function updateIncomeDisplay() {
            const total = incomeData.reduce((sum, income) => sum + income.amount, 0);
            const thisMonth = incomeData.filter(income => {
                const incomeDate = new Date(income.date);
                const now = new Date();
                return incomeDate.getMonth() === now.getMonth() && incomeDate.getFullYear() === now.getFullYear();
            }).reduce((sum, income) => sum + income.amount, 0);
            
            const currency = currentLanguage === 'lo' ? '‡∫Å‡∫µ‡∫ö' : 'LAK';
            const totalIncomeEl = document.getElementById('totalIncome');
            const monthlyIncomeEl = document.getElementById('monthlyIncome');
            const pendingPaymentsEl = document.getElementById('pendingPayments');
            
            if (totalIncomeEl) totalIncomeEl.textContent = `${total.toLocaleString()} ${currency}`;
            if (monthlyIncomeEl) monthlyIncomeEl.textContent = `${thisMonth.toLocaleString()} ${currency}`;
            
            const pendingCount = Object.values(studentPaymentStatus).filter(status => !status.paid).length;
            if (pendingPaymentsEl) pendingPaymentsEl.textContent = pendingCount;
        }

        function updatePaymentStatus() {
            const grid = document.getElementById('paymentStatusGrid');
            if (!grid) return;
            
            grid.innerHTML = '';
            
            if (students.length === 0) {
                grid.innerHTML = '<p class="text-white/70 text-center col-span-full">‡∫ç‡∫±‡∫á‡∫ö‡ªç‡ªà‡∫°‡∫µ‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô‡∫ô‡∫±‡∫Å‡∫™‡∫∂‡∫Å‡∫™‡∫≤ - ‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡ªÄ‡∫û‡∫µ‡ªà‡∫°‡∫ô‡∫±‡∫Å‡∫™‡∫∂‡∫Å‡∫™‡∫≤‡∫Å‡ªà‡∫≠‡∫ô</p>';
                return;
            }
            
            Object.entries(studentPaymentStatus).forEach(([index, status]) => {
                const div = document.createElement('div');
                div.className = `p-3 rounded-lg cursor-pointer transition-all ${status.paid ? 'bg-green-600/20 hover:bg-green-600/30' : 'bg-red-600/20 hover:bg-red-600/30'}`;
                div.onclick = () => togglePaymentStatus(index);
                div.innerHTML = `
                    <div class="text-white text-sm font-medium">${status.name}</div>
                    <div class="text-xs ${status.paid ? 'text-green-300' : 'text-red-300'}">
                        ${status.paid ? '‚úÖ ‡∫à‡ªà‡∫≤‡∫ç‡ªÅ‡∫•‡ªâ‡∫ß' : '‚ùå ‡∫ç‡∫±‡∫á‡∫ö‡ªç‡ªà‡∫à‡ªà‡∫≤‡∫ç'}
                    </div>
                `;
                grid.appendChild(div);
            });
        }

        function togglePaymentStatus(index) {
            if (studentPaymentStatus[index]) {
                studentPaymentStatus[index].paid = !studentPaymentStatus[index].paid;
                studentPaymentStatus[index].lastPayment = studentPaymentStatus[index].paid ? new Date() : null;
                updatePaymentStatus();
                updateIncomeDisplay();
            }
        }

        // Expense functions
        function addExpense() {
            const typeEl = document.getElementById('expenseType');
            const amountEl = document.getElementById('expenseAmount');
            const dateEl = document.getElementById('expenseDate');
            const descriptionEl = document.getElementById('expenseDescription');
            
            if (!typeEl || !amountEl || !dateEl) return;
            
            const type = typeEl.value;
            const amount = parseFloat(amountEl.value);
            const date = dateEl.value;
            const description = descriptionEl ? descriptionEl.value : '';
            
            if (!amount || !date) {
                alert(currentLanguage === 'lo' ? '‡∫Å‡∫∞‡∫•‡∫∏‡∫ô‡∫≤‡ªÉ‡∫™‡ªà‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô‡ªÉ‡∫´‡ªâ‡∫Ñ‡∫ª‡∫ö‡∫ñ‡ªâ‡∫ß‡∫ô.' : 'Please fill in all required fields.');
                return;
            }
            
            const expense = {
                id: Date.now(),
                type,
                amount,
                date,
                description,
                timestamp: new Date()
            };
            
            expenseData.push(expense);
            updateAllDisplays();
            cancelExpenseForm();
            
            alert(currentLanguage === 'lo' ? '‡∫ö‡∫±‡∫ô‡∫ó‡∫∂‡∫Å‡∫•‡∫≤‡∫ç‡∫à‡ªà‡∫≤‡∫ç‡∫™‡ªç‡∫≤‡ªÄ‡∫•‡∫±‡∫î!' : 'Expense added successfully!');
        }

        function updateExpenseDisplay() {
            const total = expenseData.reduce((sum, expense) => sum + expense.amount, 0);
            const thisMonth = expenseData.filter(expense => {
                const expenseDate = new Date(expense.date);
                const now = new Date();
                return expenseDate.getMonth() === now.getMonth() && expenseDate.getFullYear() === now.getFullYear();
            }).reduce((sum, expense) => sum + expense.amount, 0);
            
            const totalIncome = incomeData.reduce((sum, income) => sum + income.amount, 0);
            const netBalance = totalIncome - total;
            
            const currency = currentLanguage === 'lo' ? '‡∫Å‡∫µ‡∫ö' : 'LAK';
            const totalExpensesEl = document.getElementById('totalExpenses');
            const monthlyExpensesEl = document.getElementById('monthlyExpenses');
            const netBalanceEl = document.getElementById('netBalance');
            
            if (totalExpensesEl) totalExpensesEl.textContent = `${total.toLocaleString()} ${currency}`;
            if (monthlyExpensesEl) monthlyExpensesEl.textContent = `${thisMonth.toLocaleString()} ${currency}`;
            if (netBalanceEl) netBalanceEl.textContent = `${netBalance.toLocaleString()} ${currency}`;
            
            // Update expenses list
            const expensesList = document.getElementById('expensesList');
            if (expensesList) {
                expensesList.innerHTML = '';
                
                if (expenseData.length === 0) {
                    expensesList.innerHTML = '<div class="text-white/70 text-center p-4">‡∫ç‡∫±‡∫á‡∫ö‡ªç‡ªà‡∫°‡∫µ‡∫•‡∫≤‡∫ç‡∫à‡ªà‡∫≤‡∫ç</div>';
                    return;
                }
                
                expenseData.slice(-5).reverse().forEach(expense => {
                    const div = document.createElement('div');
                    div.className = 'glass-effect rounded-lg p-3 transition-all hover:bg-white/10';
                    div.innerHTML = `
                        <div class="flex justify-between items-center">
                            <div>
                                <div class="text-white font-medium">${expense.type.replace('_', ' ').toUpperCase()}</div>
                                <div class="text-white/70 text-sm">${expense.date}</div>
                            </div>
                            <div class="text-red-300 font-bold">${expense.amount.toLocaleString()} ${currency}</div>
                        </div>
                    `;
                    expensesList.appendChild(div);
                });
            }
        }

        // Report functions
        function setReportPeriod(period) {
            currentReportPeriod = period;
            
            // Update button styles
            ['daily', 'weekly', 'monthly', 'yearly'].forEach(p => {
                const btn = document.getElementById(p + 'Btn');
                if (btn) {
                    if (p === period) {
                        btn.className = 'btn-primary px-4 py-2 rounded-lg text-white';
                    } else {
                        btn.className = 'glass-effect px-4 py-2 rounded-lg text-white border border-white/20 hover:bg-white/20 transition-all';
                    }
                }
            });
            
            updateReportDisplay();
        }

        function viewByDate() {
            const calendarView = document.getElementById('calendarView');
            if (calendarView) {
                const selectedDate = calendarView.value;
                if (selectedDate) {
                    updateReportDisplay(selectedDate);
                }
            }
        }

        function createBarChart() {
            const barCtx = document.getElementById('barChart');
            if (!barCtx) return;
            
            const ctx = barCtx.getContext('2d');
            if (barChart) barChart.destroy();
            
            const totalIncome = incomeData.reduce((sum, income) => sum + income.amount, 0);
            const totalExpenses = expenseData.reduce((sum, expense) => sum + expense.amount, 0);
            
            barChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: [translations[currentLanguage].income, translations[currentLanguage].expense],
                    datasets: [{
                        data: [totalIncome, totalExpenses],
                        backgroundColor: ['#16a34a', '#dc2626'],
                        borderColor: ['#15803d', '#b91c1c'],
                        borderWidth: 2,
                        borderRadius: 8,
                        borderSkipped: false,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: { 
                                color: 'white',
                                font: { size: 12 }
                            },
                            grid: { color: 'rgba(255,255,255,0.1)' }
                        },
                        x: {
                            ticks: { 
                                color: 'white',
                                font: { size: 12 }
                            },
                            grid: { color: 'rgba(255,255,255,0.1)' }
                        }
                    },
                    animation: {
                        duration: 1000,
                        easing: 'easeInOutQuart'
                    }
                }
            });
        }

        function createPieChart() {
            const pieCtx = document.getElementById('pieChart');
            if (!pieCtx) return;
            
            const ctx = pieCtx.getContext('2d');
            if (pieChart) pieChart.destroy();
            
            const expenseTypes = {};
            expenseData.forEach(expense => {
                expenseTypes[expense.type] = (expenseTypes[expense.type] || 0) + expense.amount;
            });
            
            if (Object.keys(expenseTypes).length === 0) {
                // Show empty state
                ctx.fillStyle = 'white';
                ctx.font = '16px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('‡∫ç‡∫±‡∫á‡∫ö‡ªç‡ªà‡∫°‡∫µ‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô‡∫•‡∫≤‡∫ç‡∫à‡ªà‡∫≤‡∫ç', pieCtx.width / 2, pieCtx.height / 2);
                return;
            }
            
            pieChart = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: Object.keys(expenseTypes),
                    datasets: [{
                        data: Object.values(expenseTypes),
                        backgroundColor: [
                            '#dc2626', '#16a34a', '#7c3aed', 
                            '#ec4899', '#f59e0b', '#06b6d4',
                            '#8b5cf6', '#10b981', '#f97316'
                        ],
                        borderColor: 'rgba(255,255,255,0.2)',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: { 
                                color: 'white',
                                font: { size: 12 }
                            }
                        }
                    },
                    animation: {
                        duration: 1000,
                        easing: 'easeInOutQuart'
                    }
                }
            });
        }

        function updateReportDisplay(filterDate = null) {
            let filteredIncome = incomeData;
            let filteredExpenses = expenseData;
            
            if (filterDate) {
                filteredIncome = incomeData.filter(item => item.date === filterDate);
                filteredExpenses = expenseData.filter(item => item.date === filterDate);
            } else if (currentReportPeriod !== 'yearly') {
                const now = new Date();
                const filterFn = (item) => {
                    const itemDate = new Date(item.date);
                    switch (currentReportPeriod) {
                        case 'daily':
                            return itemDate.toDateString() === now.toDateString();
                        case 'weekly':
                            const weekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);
                            return itemDate >= weekAgo;
                        case 'monthly':
                            return itemDate.getMonth() === now.getMonth() && itemDate.getFullYear() === now.getFullYear();
                        default:
                            return true;
                    }
                };
                filteredIncome = incomeData.filter(filterFn);
                filteredExpenses = expenseData.filter(filterFn);
            }
            
            const totalIncome = filteredIncome.reduce((sum, income) => sum + income.amount, 0);
            const totalExpenses = filteredExpenses.reduce((sum, expense) => sum + expense.amount, 0);
            const netBalance = totalIncome - totalExpenses;
            
            const currency = currentLanguage === 'lo' ? '‡∫Å‡∫µ‡∫ö' : 'LAK';
            
            // Update report summary
            const reportTotalIncomeEl = document.getElementById('reportTotalIncome');
            const reportTotalExpensesEl = document.getElementById('reportTotalExpenses');
            const reportNetBalanceEl = document.getElementById('reportNetBalance');
            const reportActiveStudentsEl = document.getElementById('reportActiveStudents');
            
            if (reportTotalIncomeEl) reportTotalIncomeEl.textContent = `${totalIncome.toLocaleString()} ${currency}`;
            if (reportTotalExpensesEl) reportTotalExpensesEl.textContent = `${totalExpenses.toLocaleString()} ${currency}`;
            if (reportNetBalanceEl) reportNetBalanceEl.textContent = `${netBalance.toLocaleString()} ${currency}`;
            if (reportActiveStudentsEl) reportActiveStudentsEl.textContent = students.length;
            
            // Update detailed transactions table
            const tableBody = document.getElementById('detailedTransactionsTable');
            if (tableBody) {
                tableBody.innerHTML = '';
                
                const allTransactions = [
                    ...filteredIncome.map(item => ({...item, type: 'income', typeDisplay: translations[currentLanguage].income})),
                    ...filteredExpenses.map(item => ({...item, type: 'expense', typeDisplay: translations[currentLanguage].expense}))
                ].sort((a, b) => new Date(b.timestamp || b.date) - new Date(a.timestamp || a.date));
                
                if (allTransactions.length === 0) {
                    const row = document.createElement('tr');
                    row.innerHTML = '<td colspan="5" class="p-8 text-center text-white/70">‡∫ç‡∫±‡∫á‡∫ö‡ªç‡ªà‡∫°‡∫µ‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô‡∫ó‡∫∏‡∫•‡∫∞‡∫Å‡ªç‡∫≤</td>';
                    tableBody.appendChild(row);
                    return;
                }
                
                allTransactions.forEach(transaction => {
                    const row = document.createElement('tr');
                    row.className = 'border-b border-white/10 hover:bg-white/5 transition-colors';
                    const time = transaction.timestamp ? new Date(transaction.timestamp).toLocaleTimeString() : '--:--';
                    row.innerHTML = `
                        <td class="p-3">${transaction.date}</td>
                        <td class="p-3">${time}</td>
                        <td class="p-3">${transaction.typeDisplay}</td>
                        <td class="p-3">${transaction.description || transaction.type}</td>
                        <td class="p-3 text-right ${transaction.type === 'income' ? 'text-green-300' : 'text-red-300'}">
                            ${transaction.type === 'income' ? '+' : '-'}${transaction.amount.toLocaleString()} ${currency}
                        </td>
                    `;
                    tableBody.appendChild(row);
                });
            }
        }

        // Update all displays
        function updateAllDisplays() {
            updateIncomeDisplay();
            updateExpenseDisplay();
            updatePaymentStatus();
            updateReportDisplay();
            updateDashboardCounts();
        }

        // Initialize the app
        function initializeApp() {
            // Set today's date as default
            const today = new Date().toISOString().split('T')[0];
            const incomeDateEl = document.getElementById('incomeDate');
            const expenseDateEl = document.getElementById('expenseDate');
            const calendarViewEl = document.getElementById('calendarView');
            
            if (incomeDateEl) incomeDateEl.value = today;
            if (expenseDateEl) expenseDateEl.value = today;
            if (calendarViewEl) calendarViewEl.value = today;
            
            // Initialize language
            changeLanguage('lo');
            
            // Initialize event listeners
            initializeLogoUpload();
            initializeBackgroundUpload();
            
            // Close language menu when clicking outside
            document.addEventListener('click', function(e) {
                const languageMenu = document.getElementById('languageMenu');
                const dashboardLanguageMenu = document.getElementById('dashboardLanguageMenu');
                const languageButton = e.target.closest('[onclick="toggleLanguageMenu()"]');
                
                if (languageMenu && !languageButton && !languageMenu.contains(e.target)) {
                    languageMenu.classList.add('hidden');
                }
                if (dashboardLanguageMenu && !languageButton && !dashboardLanguageMenu.contains(e.target)) {
                    dashboardLanguageMenu.classList.add('hidden');
                }
            });
            
            // Load saved logo
            loadSavedLogo();
            
            // Initialize payment status for existing students
            students.forEach((student, index) => {
                if (!studentPaymentStatus[index]) {
                    studentPaymentStatus[index] = {
                        name: student.name || student,
                        paid: false,
                        amount: 0,
                        lastPayment: null
                    };
                }
            });
            
            console.log('Sedthasard App v7.0 initialized successfully! üöÄ');
        }

        // Initialize when DOM is loaded
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeApp);
        } else {
            initializeApp();
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96e98d3f5039500b',t:'MTc1NTEwMjE1MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
